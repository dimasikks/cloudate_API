# Включение/Выключение стендов АТК

## Использование

Для включения/выключения стендов АТК нужно запустить пайплайн с ветки master данного репозитория, далее выбрать нужную стадию - power_on, power_off, status

- **power_on**
    - стадия, которая выключает выбранный при запуске пайплайна стенд
- **power_off**
    - стадия, которая включает выбранный при запуске пайплайна стенд
- **status**
    - стадия, отвечающая за проверку состояния стенда
    - не зависит от предыдущих стадий, может запускаться самостоятельно для проверки
    - отправляет уведомление при **успешной полной проверке состояния стенда** в телеграмм чат

**При запуске пайплайна можно выполнить какую-либо стадию, а далее перезапустить job только указав другие параметры (поддерживается мануальный ввод параметров для каждой стадии в пайплайне)**

Например: запускаем пайплайн, указав стенд sed, в стадии выключения, после того как она отработала, перезапускаем job, указывая новые параметры (update CI/CD variables) в виде: VM_FILE=sed3 - job запустится для стенда sed3

**Для работы необходимо выбрать стенд, который следует включить/выключить, также ввести требуемые переменные, которые указаны ниже**

## Переменные для запуска (временные)

**PROJECT_ID**

```bash
[MASKED]
```

**CLOUDATE_TOKEN**

```bash
[MASKED]
```

**ZABBIX_TOKEN**

```bash
[MASKED]
```

## Стенды и ВМ, для которых работает включение/выключение (название ВМ:ID в cloudate)

### at-consulting
```bash
[MASKED]
```

### sed
```bash
[MASKED]
```

### sed3
```bash
[MASKED]
```
rs1db1-sed3-rtech-ru:127860
bundle-1-sed3-rtech-ru:124089
```
